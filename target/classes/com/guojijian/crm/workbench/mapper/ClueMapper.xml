<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.guojijian.crm.workbench.mapper.ClueMapper">
  <resultMap id="BaseResultMap" type="com.guojijian.crm.workbench.pojo.Clue">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 27 15:31:44 CST 2022.
    -->
    <id column="id" jdbcType="CHAR" property="id" />
    <result column="fullname" jdbcType="VARCHAR" property="fullname" />
    <result column="appellation" jdbcType="VARCHAR" property="appellation" />
    <result column="owner" jdbcType="CHAR" property="owner" />
    <result column="company" jdbcType="VARCHAR" property="company" />
    <result column="job" jdbcType="VARCHAR" property="job" />
    <result column="email" jdbcType="VARCHAR" property="email" />
    <result column="phone" jdbcType="VARCHAR" property="phone" />
    <result column="website" jdbcType="VARCHAR" property="website" />
    <result column="mphone" jdbcType="VARCHAR" property="mphone" />
    <result column="state" jdbcType="VARCHAR" property="state" />
    <result column="source" jdbcType="VARCHAR" property="source" />
    <result column="create_by" jdbcType="CHAR" property="createBy" />
    <result column="create_date" jdbcType="CHAR" property="createDate" />
    <result column="edit_by" jdbcType="CHAR" property="editBy" />
    <result column="edit_date" jdbcType="CHAR" property="editDate" />
    <result column="description" jdbcType="VARCHAR" property="description" />
    <result column="contact_summary" jdbcType="VARCHAR" property="contactSummary" />
    <result column="next_contact_date" jdbcType="CHAR" property="nextContactDate" />
    <result column="address" jdbcType="VARCHAR" property="address" />
  </resultMap>
  <sql id="columnAll">
    id, fullname, appellation, owner, company, job, email, phone, website, mphone,
    state, source, create_by, create_date, edit_by, edit_date, description, contact_summary,
    next_contact_date, address
  </sql>

  <insert id="insert" parameterType="com.guojijian.crm.workbench.pojo.Clue">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 27 15:31:44 CST 2022.
    -->
    insert into tbl_clue (id, fullname, appellation,
    owner, company, job, email,
    phone, website, mphone,
    state, source, create_by,
    create_date, edit_by, edit_date,
    description, contact_summary, next_contact_date,
    address)
    values (#{id,jdbcType=CHAR}, #{fullname,jdbcType=VARCHAR}, #{appellation,jdbcType=VARCHAR},
    #{owner,jdbcType=CHAR}, #{company,jdbcType=VARCHAR}, #{job,jdbcType=VARCHAR}, #{email,jdbcType=VARCHAR},
    #{phone,jdbcType=VARCHAR}, #{website,jdbcType=VARCHAR}, #{mphone,jdbcType=VARCHAR},
    #{state,jdbcType=VARCHAR}, #{source,jdbcType=VARCHAR}, #{createBy,jdbcType=CHAR},
    #{createDate,jdbcType=CHAR}, #{editBy,jdbcType=CHAR}, #{editDate,jdbcType=CHAR},
    #{description,jdbcType=VARCHAR}, #{contactSummary,jdbcType=VARCHAR}, #{nextContactDate,jdbcType=CHAR},
    #{address,jdbcType=VARCHAR})
  </insert>

  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 27 15:31:44 CST 2022.
    -->
    select id, fullname, appellation, owner, company, job, email, phone, website, mphone,
    state, source, create_by, create_date, edit_by, edit_date, description, contact_summary,
    next_contact_date, address
    from tbl_clue
  </select>

  <!--List<Clue> selectConditionClue(clue);-->
  <select id="selectConditionClue" resultMap="BaseResultMap">
    SELECT c.id, c.fullname, c.appellation, u1.name owner, c.company, c.job, c.email, c.phone, c.website, c.mphone,
    d1.value state, d2.value source, u2.name create_by, c.create_date, u3.name edit_by, c.edit_date, c.description, c.contact_summary,
    c.next_contact_date, c.address
    FROM tbl_clue c
    JOIN tbl_user u1 ON u1.id=c.owner
    JOIN tbl_user u2 ON u2.id=c.create_by
    LEFT JOIN tbl_user u3 ON u3.id=c.edit_by
    LEFT JOIN tbl_dic_value d1 ON d1.id=c.state
    LEFT JOIN tbl_dic_value d2 ON d2.id=c.source
    <where>
      <if test="fullname!=null and fullname!=''">
        and c.fullname like '%' #{fullname} '%'
      </if>
      <if test="company!=null and company!=''">
        and c.company like '%' #{company} '%'
      </if>
      <if test="mphone!=null and mphone!=''">
        and c.mphone=#{mphone}
      </if>
      <if test="source!=null and source!=''">
        and d2.id=#{source}
      </if>
      <if test="owner!=null and owner!=''">
        and u1.name like '%' #{owner} '%'
      </if>
      <if test="phone!=null and phone!=''">
        and c.phone=#{phone}
      </if>
      <if test="state!=null and state!=''">
        and d1.id=#{state}
      </if>
    </where>
    ORDER BY c.next_contact_date ASC
  </select>

  <!--int insertClue(Clue clue);-->
  <insert id="insertClue">
    INSERT INTO tbl_clue(id, fullname, appellation, owner, company, job, email, phone, website, mphone,
    state, source, create_by, create_date, description, contact_summary, next_contact_date, address)
    VALUES(#{id},#{fullname},#{appellation},#{owner},#{company},#{job},#{email},#{phone},#{website},#{mphone},
    #{state},#{source},#{createBy},#{createDate},#{description},#{contactSummary},#{nextContactDate},#{address})
  </insert>

  <!--int deleteCluesById(String[] ids);-->
  <delete id="deleteCluesById">
    DELETE FROM tbl_clue WHERE id IN
    <foreach collection="ids" item="id" separator="," open="(" close=")">
      #{id}
    </foreach>
  </delete>

  <!--Clue selectClueForDetailById(String id);-->
  <select id="selectClueForDetailById" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 27 15:31:44 CST 2022.
    -->
    SELECT fullname, appellation, owner, company, job, email, phone, website, mphone,
    state, source, description, contact_summary,
    next_contact_date, address
    FROM tbl_clue
    WHERE id=#{id}
  </select>

  <!--int updateClueById(Clue clue);-->
  <update id="updateClueById" parameterType="com.guojijian.crm.workbench.pojo.Clue">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 27 15:31:44 CST 2022.
    -->
    update tbl_clue
    set fullname = #{fullname,jdbcType=VARCHAR},
    appellation = #{appellation,jdbcType=VARCHAR},
    owner = #{owner,jdbcType=CHAR},
    company = #{company,jdbcType=VARCHAR},
    job = #{job,jdbcType=VARCHAR},
    email = #{email,jdbcType=VARCHAR},
    phone = #{phone,jdbcType=VARCHAR},
    website = #{website,jdbcType=VARCHAR},
    mphone = #{mphone,jdbcType=VARCHAR},
    state = #{state,jdbcType=VARCHAR},
    source = #{source,jdbcType=VARCHAR},
    description = #{description,jdbcType=VARCHAR},
    contact_summary = #{contactSummary,jdbcType=VARCHAR},
    next_contact_date = #{nextContactDate},
    address = #{address,jdbcType=VARCHAR}
    where id = #{id,jdbcType=CHAR}
  </update>

  <!--Clue selectClueDetailById(String id);-->
  <select id="selectClueDetailById" resultMap="BaseResultMap">
    SELECT c.id, c.fullname, d3.value appellation, u1.name owner, c.company, c.job, c.email, c.phone, c.website, c.mphone,
    d1.value state, d2.value source, u2.name create_by, c.create_date, u3.name edit_by, c.edit_date, c.description, c.contact_summary,
    c.next_contact_date, c.address
    FROM tbl_clue c
    JOIN tbl_user u1 ON u1.id=c.owner
    JOIN tbl_user u2 ON u2.id=c.create_by
    LEFT JOIN tbl_user u3 ON u3.id=c.edit_by
    LEFT JOIN tbl_dic_value d3 ON d3.id=c.appellation
    LEFT JOIN tbl_dic_value d1 ON d1.id=c.state
    LEFT JOIN tbl_dic_value d2 ON d2.id=c.source
    WHERE c.id=#{id}
  </select>

  <!--Clue selectClueById(String id);-->
  <select id="selectClueById" resultMap="BaseResultMap">
    SELECT c.id,c.fullname,d1.value appellation,u1.name owner,c.company
    FROM tbl_clue c
    LEFT JOIN tbl_user u1 ON u1.id=c.owner
    LEFT JOIN tbl_dic_value d1 ON d1.id=c.appellation
    WHERE c.id=#{id}
  </select>

  <!--Clue selectClueForConvertById(String id);-->
  <select id="selectClueForConvertById" resultMap="BaseResultMap">
    SELECT fullname, appellation, owner, company, job, email, phone, website, mphone,
    state, source, description, contact_summary,
    next_contact_date, address
    FROM tbl_clue
    WHERE id=#{id}
  </select>

  <!--int deleteClueById(String id);-->
  <delete id="deleteClueById" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Dec 27 15:31:44 CST 2022.
    -->
    delete from tbl_clue
    where id = #{id,jdbcType=CHAR}
  </delete>
</mapper>